"use strict";$(document).ready(function(){$(".popup-with-zoom-anim").magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{open:function(){var e=$(this.currItem.src);setTimeout(function(){e.find("input:not([type=submit])").each(function(){if(""===$(this).val())return $(this).focus(),!1})},500)}}})}),$(function(){var e=$(".header__top").offset().top+300,i=function(){$(window).scrollTop()>e?$(".header__top").addClass("header__top_sticky"):$(".header__top").removeClass("header__top_sticky")};i(),$(window).scroll(function(){return i()})}),$(function(){$(".hamburger").click(function(){return $(this).toggleClass("hamburger_open").find(".hamburger__btn").toggleClass("hamburger__btn_on"),$(".top-menu").fadeToggle(),$(".page").toggleClass("page_fixed"),!1})}),$(function(){function e(e){var i=$(".top-menu");i.is(e.target)||0!==i.has(e.target).length||$(e.target).hasClass("hamburger")||$(e.target).hasClass("hamburger__btn")||(i.fadeOut(),$(".hamburger").removeClass("hamburger_open").find(".hamburger__btn").removeClass("hamburger__btn_on"),$(".page").removeClass("page_fixed"))}function i(i){i.matches?($(".top-menu__item_has-child").click(function(){$(this).find(".top-menu__submenu").slideToggle(),$(this).toggleClass("top-menu__item_open")}),document.addEventListener("touchstart",e,!1),document.addEventListener("click",e,!1),$(".top-menu").is(":visible")&&$(".page").addClass("page_fixed"),$(".top-menu__submenu").css("display","none")):($(".top-menu__item_has-child").unbind("click").removeClass("top-menu__item_open"),document.removeEventListener("touchstart",e,!1),document.removeEventListener("click",e,!1),$(".page").removeClass("page_fixed"),$(".top-menu__submenu").css("display","block"))}var t=window.matchMedia("screen and (max-width: 991px)");t.addListener(i),i(t)}),$(function(){function e(e){e.matches?($(".vertical-menu_toggle .vertical-menu__title").click(function(){$(this).toggleClass("vertical-menu__title_open").parents(".vertical-menu_toggle").find(".vertical-menu__list").slideToggle()}),$(".vertical-menu_toggle").find(".vertical-menu__list").css("display","none")):$(".vertical-menu_toggle .vertical-menu__title").unbind("click").removeClass("vertical-menu__title_open").parents(".vertical-menu_toggle").find(".vertical-menu__list").css("display","block")}var i=window.matchMedia("screen and (max-width: 767px)");i.addListener(e),e(i)}),$(function(){function e(e){if(e.matches){$(".section-issues__item_desktop .section-issues__question").unbind("click"),$(".section-issues__item_mobile .section-issues__question").click(function(e){e.preventDefault(),$(".section-issues .section-issues__question").removeClass("section-issues__question_active"),$(this).addClass("section-issues__question_active");var i=$(this).attr("href");$(".section-issues__content").not(i).css({display:"none"}),$(i).fadeIn(500)});var i=$(".section-issues__question_active").attr("href");$(i).css("display","block")}else{$(".section-issues__item_mobile .section-issues__question").unbind("click"),$(".section-issues__item_desktop .section-issues__question").click(function(e){e.preventDefault();var i=$(this).attr("href"),t=$(i).html();$(this).hasClass("section-issues__question_active")||$(".section-issues__for-content").html(t),$(".section-issues .section-issues__question").removeClass("section-issues__question_active"),$(this).addClass("section-issues__question_active")});var t=$(".section-issues__question_active").attr("href"),s=$(t).html();$(".section-issues__for-content").html(s)}}$(".section-issues__item_desktop .section-issues__block").click(function(e){e.preventDefault(),$(this).hasClass("section-issues__block_open")?($(this).removeClass("section-issues__block_open"),$(this).parents(".section-issues__item").find(".section-issues__questions").slideUp()):($(this).addClass("section-issues__block_open"),$(this).parents(".section-issues__item").find(".section-issues__questions").slideDown(),$(".section-issues__item").find(".section-issues__block").not($(this)).removeClass("section-issues__block_open").parents(".section-issues__item").find(".section-issues__questions").slideUp())});var i=window.matchMedia("screen and (max-width: 767px)");i.addListener(e),e(i),$(".section-issues__question_active").parents(".section-issues__item").find(".section-issues__block").click()}),$(function(){$(".mask_phone").mask("+7(999) 999-99-99"),$.mask.definitions.H="[012]",$.mask.definitions.M="[012345]",$(".mask_time").mask("H9:M9",{placeholder:"_",completed:function(){var e=$(this).val().split(":");1*e[0]>23&&(e[0]="23"),1*e[1]>59&&(e[1]="59"),$(this).val(e.join(":"))}})}),$(function(){var e=function(){setTimeout(function(){$(".section-services__item:last").is(":visible")&&$(".section-services__button").addClass("button_disabled")},500)};e(),$(".section-services__button").click(function(){return e(),$(".section-services__item:hidden").slice(0,4).slideDown(),!1})}),$(function(){var e=$(".service-slider__list").slick({infinite:!0,fade:!0,autoplay:!0,autoplaySpeed:5e3,speed:300,slidesToShow:1,swipeToSlide:!0,dots:!1,adaptiveHeight:!1,arrows:!1});$(".service-slider__next").click(function(){e.slick("slickNext")}),$(".service-slider__prev").click(function(){e.slick("slickPrev")}),$(".service-slider__list").slick("getSlick").slideCount<=1&&$(".service-slider__list").find(".service-slider__arrows-container").css({display:"none"})}),$(function(){$(".section-prices__list").slick({infinite:!0,fade:!1,autoplay:!0,autoplaySpeed:5e3,speed:300,slidesToShow:3,swipeToSlide:!0,dots:!1,adaptiveHeight:!1,arrows:!1,appendDots:$(".section-prices__navigation"),appendArrows:$(".section-prices__navigation"),prevArrow:'<span class="section-prices__prev"></span>',nextArrow:'<span class="section-prices__next"></span>',responsive:[{breakpoint:992,settings:{slidesToShow:2,arrows:!0,dots:!0}},{breakpoint:768,settings:{slidesToShow:1,arrows:!0,dots:!0}}]})}),$(function(){var e=document.querySelectorAll(".input-file__input");Array.prototype.forEach.call(e,function(e){var i=e.nextElementSibling,t=i.innerHTML;e.addEventListener("change",function(e){var s="";s=this.files&&this.files.length>1&&this.files.length<=4?this.files.length+" файла выбрано":this.files&&this.files.length>4?this.files.length+" файлов выбрано":e.target.value.split("\\").pop(),s?i.querySelector(".input-file__field").innerHTML=s:i.innerHTML=t})})}),$(function(){$(".section-works__item").each(function(e){var i=$(this).find(".section-works__img").attr("src");$(this).css({background:"url("+i+") center no-repeat","background-size":"cover"})}),$(".section-works__slider").slick({infinite:!0,fade:!1,autoplay:!0,autoplaySpeed:5e3,speed:500,slidesToShow:1,slidesToScroll:1,swipeToSlide:!0,dots:!0,adaptiveHeight:!1,arrows:!0,asNavFor:".section-works__slider-previews",appendDots:$(".section-works__navigation"),appendArrows:$(".section-works__navigation"),prevArrow:'<span class="section-works__prev"></span>',nextArrow:'<span class="section-works__next"></span>'}),$(".section-works__item-previews").each(function(e){var i=$(this).find(".section-works__img-previews").attr("src");$(this).css({background:"url("+i+") center no-repeat","background-size":"cover"})}),$(".section-works__slider-previews").slick({slidesToShow:3,slidesToScroll:1,swipeToSlide:!0,arrows:!1,dots:!1,focusOnSelect:!0,vertical:!0,verticalSwiping:!0,asNavFor:".section-works__slider",responsive:[{breakpoint:992,settings:{vertical:!1,verticalSwiping:!1}},{breakpoint:480,settings:{vertical:!1,verticalSwiping:!1,slidesToShow:2}}]})}),$(function(){$(".section-reviews__slider").slick({infinite:!0,fade:!1,autoplay:!1,speed:0,slidesToShow:1,slidesToScroll:1,swipeToSlide:!0,draggable:!1,variableWidth:!0,dots:!1,adaptiveHeight:!0,arrows:!0,centerMode:!0,focusOnSelect:!0,appendArrows:$(".section-reviews__navigation"),prevArrow:'<span class="section-reviews__prev">Предыдущий</span>',nextArrow:'<span class="section-reviews__next">Следующий</span>',responsive:[{breakpoint:768,settings:{speed:500,centerMode:!1,variableWidth:!1}}]})}),$(function(){var e=$(".tooltip"),i=!1,t=!1,s=void 0;e.bind("mouseenter",function(){if(i=$(this),s=i.attr("data-tooltip"),t=$('<div id="tooltip"></div>'),!s||""==s)return!1;i.removeAttr("data-tooltip"),t.css("opacity",0).html(s).appendTo("body");var e=function(){$(window).width()<1.5*t.outerWidth()?t.css("max-width",$(window).width()/2):t.css("max-width",340);var e=i.offset().left+i.outerWidth()/2-t.outerWidth()/2,s=i.offset().top-t.outerHeight()-20;if(e<0?(e=i.offset().left+i.outerWidth()/2-20,t.addClass("left")):t.removeClass("left"),e+t.outerWidth()>$(window).width()?(e=i.offset().left-t.outerWidth()+i.outerWidth()/2+20,t.addClass("right")):t.removeClass("right"),s<0){i.offset().top,i.outerHeight();t.addClass("top")}else t.removeClass("top");t.css({left:e,top:s}).animate({top:"+=10",opacity:1},150)};e(),$(window).resize(e);var o=function(){t.animate({top:"-=10",opacity:0},150,function(){$(this).remove()}),i.attr("data-tooltip",s)};i.bind("mouseleave",o),t.bind("click",o)})}),$(function(){$(".section-calculator__panel_sticky").stickit({screenMinWidth:992})}),$(function(){$(".custom-select__drop-button").click(function(){var e=$(this).parents(".custom-select").find(".custom-select__drop-list");return e.is(":hidden")?(e.slideDown(),$(this).addClass("custom-select__drop-button_active"),e.find("li").click(function(){e.find(".custom-select__drop-item_selected").removeClass("custom-select__drop-item_selected"),$(this).addClass("custom-select__drop-item_selected");var i=$(this).find("a").text(),t=$(this).find("a").attr("href");return $(this).parents(".custom-select").find(".custom-select__drop-hidden-input").val(t),$(this).parents(".custom-select").find(".custom-select__drop-button").removeClass("custom-select__drop-button_active").html(i),e.slideUp(),!1})):($(this).removeClass("custom-select__drop-button_active"),e.slideUp()),!1}),$(document).click(function(e){$(e.target).closest(".custom-select__drop-list").length||($(".custom-select__drop-list").slideUp("slow"),$(".custom-select__drop-button").removeClass("custom-select__drop-button_active"),e.stopPropagation())})}),$(function(){$(".side-item__popup_magnific").magnificPopup({type:"image",closeOnContentClick:!0,mainClass:"mfp-with-zoom"}),$(".side-item_calculator").click(function(){$(this).parents(".section-calculator__step").find(".side-item_active").removeClass("side-item_active"),$(this).addClass("side-item_active")}),$(".side-item__popup_magnific").click(function(e){e.stopPropagation()})}),$(function(){$(".keypad").keypad({keypadOnly:!1,closeText:"",clearText:"",layout:["789","456","123",$.keypad.CLEAR+"0"+$.keypad.CLOSE]})}),$(function(){$(".link-scroll").click(function(){var e=$(this).attr("href"),i=$(e).offset().top;return $("html, body").animate({scrollTop:i},1100),!1})}),$(function(){function e(){var e=[];$(".visualizer-control__drop-button").each(function(){e.push($(this).attr("href"))});var i='url("img/visualizer/'+$(".visualizer__controls").attr("data-folder")+"/"+e.join("")+$(".visualizer__color_active").attr("href")+'.png") center no-repeat';$(".visualizer__fence").css("background",i)}e(),$(".visualizer-control__drop-button").click(function(){$(".visualizer-control__drop-list").slideUp("slow"),$(".visualizer-control__drop-button").removeClass("visualizer-control__drop-button_active");var i=$(this).parents(".visualizer-control").find(".visualizer-control__drop-list");return i.is(":hidden")?(i.slideDown(),$(this).addClass("visualizer-control__drop-button_active"),i.find("li").click(function(){i.find(".visualizer-control__drop-item_selected").removeClass("visualizer-control__drop-item_selected"),$(this).addClass("visualizer-control__drop-item_selected");var t=$(this).find("a").text(),s=$(this).find("a").attr("href");return $(this).parents(".visualizer-control").find(".visualizer-control__drop-button").removeClass("visualizer-control__drop-button_active").attr("href",s).html(t),i.slideUp(),"r1"==$(this).find("a").attr("href")?$(".visualizer__box").removeClass("visualizer__box_back").addClass("visualizer__box_front"):"r2"==$(this).find("a").attr("href")&&$(".visualizer__box").removeClass("visualizer__box_front").addClass("visualizer__box_back"),"s2"==$(this).find("a").attr("href")?$(".visualizer").removeClass("visualizer__box_s4").addClass("visualizer__box_s2"):"s4"==$(this).find("a").attr("href")&&$(".visualizer").removeClass("visualizer__box_s2").addClass("visualizer__box_s4"),e(),!1})):($(this).removeClass("visualizer-control__drop-button_active"),i.slideUp()),!1}),$(document).click(function(e){$(e.target).closest(".visualizer-control__drop-list").length||($(".visualizer-control__drop-list").slideUp("slow"),$(".visualizer-control__drop-button").removeClass("visualizer-control__drop-button_active"),e.stopPropagation())}),$(".visualizer__color").click(function(){var i=$(this);return i.addClass("visualizer__color_click"),setTimeout(function(){i.removeClass("visualizer__color_click")},300),$(".visualizer__buttons").find(".visualizer__color").removeClass("visualizer__color_active"),i.addClass("visualizer__color_active"),e(),!1}),$(".visualizer__color:first").click(),$(".visualizer__ios-switch .ios-switch__input").change(function(){$(this).prop("checked")?($(".visualizer__box").removeClass("visualizer__box_interactive-off"),$(".visualizer__ios-switch-ischecked").html("включен")):($(".visualizer__box").addClass("visualizer__box_interactive-off"),$(".visualizer__ios-switch-ischecked").html("выключен"))}),$(function(){var e=$(".visualizer__circle_tooltip"),i=!1,t=!1,s=void 0;e.bind("mouseenter",function(){if(i=$(this),s=i.find(".visualizer__circle-content").html(),t=$('<div class="visualizer__tooltip"></div>'),!s||""==s)return!1;t.css("opacity",0).html(s).appendTo("body");var e=function(){$(window).width()<1.5*t.outerWidth()?t.css("max-width",$(window).width()/2):t.css("max-width",340);var e=i.offset().left+i.outerWidth()/2-t.outerWidth()/2,s=i.offset().top-t.outerHeight()-20;if(e<0?(e=i.offset().left+i.outerWidth()/2-20,t.addClass("left")):t.removeClass("left"),e+t.outerWidth()>$(window).width()?(e=i.offset().left-t.outerWidth()+i.outerWidth()/2+20,t.addClass("right")):t.removeClass("right"),s<0){i.offset().top,i.outerHeight();t.addClass("top")}else t.removeClass("top");t.css({left:e,top:s}).animate({top:"+=10",opacity:1},150)};e(),$(window).resize(e);var o=function(){t.animate({top:"-=10",opacity:0},150,function(){$(this).remove()})};i.bind("mouseleave",o),t.bind("click",o)})})}),$(function(){$(".section-gallery__side-item").magnificPopup({delegate:"a",type:"image",tLoading:"Загрузка изображения #%curr%...",mainClass:"section-gallery__mfp",gallery:{enabled:!0,navigateByImgClick:!0,preload:[1,2],tCounter:""},image:{tError:"Изображение #%curr% не может быть загружено.",titleSrc:function(e){return e.el.attr("title")}}})}),$(function(){function e(e,i,t){localStorage.setItem("inputName",e),localStorage.setItem("inputEmail",i),localStorage.setItem("inputPhone",t)}$(".form-validation").each(function(){var i=$(this).find('input[type="submit"]'),t=$(this).find('input[name="name"]'),s=$(this).find('input[name="email"]'),o=$(this).find('input[name="phone"]');t.length&&null!=localStorage.getItem("inputName")&&t.val(localStorage.getItem("inputName")),s.length&&null!=localStorage.getItem("inputEmail")&&s.val(localStorage.getItem("inputEmail")),o.length&&null!=localStorage.getItem("inputPhone")&&o.val(localStorage.getItem("inputPhone")),$(this).validate({highlight:function(e,i){$(e).removeClass("validation_valid").addClass("validation_invalid")},unhighlight:function(e,i){$(e).addClass("validation_valid").removeClass("validation_invalid")},errorElement:"span",errorClass:"form-validation__error-text",ignore:".validation_ignore",focusInvalid:!0,submitHandler:function(n){var a=$(n);return $.ajax({}).done(function(n){e(t.val(),s.val(),o.val()),i.attr("disabled","disabled"),alert("Заявка отправлена, спасибо! В общем тут нужно сделать что-то более красивое, нежели нативный alert, а также добавить обработчик, чтобы данные отправлялись."),setTimeout(function(){a.trigger("reset"),i.removeAttr("disabled"),a.find(".validation_valid").removeClass("validation_valid"),a.find(".form-validation__group_valid").removeClass("form-validation__group_valid")},3e3)}),!1}}),$.validator.addMethod("myEmail",function(e,i){return this.optional(i)||/^(([^<>()[\]\\.,;:\s@\']+(\.[^<>()[\]\\.,;:\s@\']+)*)|(\'.+\'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},"Некорректный email"),$.validator.addMethod("validationRequired",$.validator.methods.required,"Обязательное поле!"),$.validator.addMethod("validationMinlength",$.validator.methods.minlength,"Минимум {0} символов!"),$.validator.addMethod("validationMaxlength",$.validator.methods.maxlength,"Максимум {0} символов!"),$.validator.addMethod("validationDigits",$.validator.methods.digits,"Должны быть только цифры!"),$.validator.addMethod("validationRangelength",$.validator.methods.rangelength,"Символов не менее {0} и не более {1}"),$.validator.addClassRules({validation:{validationRequired:!0},validation_email:{myEmail:!0},validation_minlength:{validationMinlength:3},validation_maxlength:{validationMaxlength:10},validation_digits:{validationDigits:!0},validation_rangelength:{validationRangelength:[3,7]}})})}),$(function(){$(window).scroll(function(){$(this).scrollTop()>400?$(".to-top").fadeIn():$(".to-top").fadeOut()}),$(".to-top").click(function(){return $("html, body").animate({scrollTop:0},600),!1})});